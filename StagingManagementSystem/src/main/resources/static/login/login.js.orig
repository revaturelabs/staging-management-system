<<<<<<< HEAD
const loginCtrl = ($scope, $http, $state) => {
=======
const loginCtrl = ($scope, $http, $state, userService) => {
>>>>>>> 438bf485d2a51bb7d559b33dfc14903ec8c9f00e
  const loginBtn = document.getElementById('loginBtn');
  $scope.username = '';
  $scope.password = '';
  $scope.errorMsgShow = false;

  $scope.submit = () => {
<<<<<<< HEAD
  	loginBtn.disabled = true;
  	loginBtn.innerHTML = 'Logging in...';
=======
    loginBtn.disabled = true;
    loginBtn.innerHTML = 'Logging in...';
>>>>>>> 438bf485d2a51bb7d559b33dfc14903ec8c9f00e
    $scope.errorMsgShow = false;

    if ($scope.username === '' || $scope.username === undefined) {
      $scope.errorMsg = 'Please input a Username.';
      $scope.errorMsgShow = true;
      loginBtn.disabled = false;
<<<<<<< HEAD
    	loginBtn.innerHTML = 'Log In';
=======
      loginBtn.innerHTML = 'Log In';
>>>>>>> 438bf485d2a51bb7d559b33dfc14903ec8c9f00e
    } else if ($scope.password === '' || $scope.password === undefined) {
      $scope.errorMsg = 'Please input a Password.';
      $scope.errorMsgShow = true;
      loginBtn.disabled = false;
<<<<<<< HEAD
    	loginBtn.innerHTML = 'Log In';
    } else {
    	$http({
    		method: 'POST',
    		url: '/login',
    		data: { username: $scope.username, password: $scope.password },
    	}).then((response) => {
<<<<<<< HEAD
    		if (response.data.permission !== undefined)    			{ $state.go('manager.home'); }    		else    			{ $state.go('associate'); }
=======
    		if(response.data.permission !== undefined)
    			$state.go('manager.home');
    		else
    			$state.go('associate.home');
>>>>>>> 40e8335202f9099d2b62eaffa32ed7bc17d50acc
    	}, () => {
      $scope.errorMsg = 'Username or Password is incorrect.';
      $scope.errorMsgShow = true;
      loginBtn.disabled = false;
      	loginBtn.innerHTML = 'Log In';
    });
=======
      loginBtn.innerHTML = 'Log In';
    } else {
      $http({
        method: 'POST',
        url: '/login',
        data: { username: $scope.username, password: $scope.password },
      })
        .then((response) => {
          userService.setUser(response.data);
          if (response.data.permission !== undefined) {
            $state.go('manager.home');
          } else {
            $state.go('associate.home');
          }
        }, () => {
          $scope.errorMsg = 'Username or Password is incorrect.';
          $scope.errorMsgShow = true;
          loginBtn.disabled = false;
          loginBtn.innerHTML = 'Log In';
        });
>>>>>>> 438bf485d2a51bb7d559b33dfc14903ec8c9f00e
    }
  };
};

export default loginCtrl;
